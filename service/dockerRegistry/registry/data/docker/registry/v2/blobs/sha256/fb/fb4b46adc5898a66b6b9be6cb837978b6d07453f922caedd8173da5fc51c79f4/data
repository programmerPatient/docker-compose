{"architecture":"arm64","config":{"ExposedPorts":{"9000/tcp":{}},"Env":["PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin","PHPIZE_DEPS=autoconf \t\tdpkg-dev dpkg \t\tfile \t\tg++ \t\tgcc \t\tlibc-dev \t\tmake \t\tpkgconf \t\tre2c","PHP_INI_DIR=/usr/local/etc/php","PHP_CFLAGS=-fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64","PHP_CPPFLAGS=-fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64","PHP_LDFLAGS=-Wl,-O1 -pie","GPG_KEYS=528995BFEDFBA7191D46839EF9BA0ADA31CBD89E 39B641343D8C104B2B146DC3F9C39DC0B9698544 F1F692238FBC1666E5A5CCD4199F9DFEF6FFBAFD","PHP_VERSION=8.1.27","PHP_URL=https://www.php.net/distributions/php-8.1.27.tar.xz","PHP_ASC_URL=https://www.php.net/distributions/php-8.1.27.tar.xz.asc","PHP_SHA256=479e65c3f05714d4aace1370e617d78e49e996ec7a7579a5be47535be61f0658","LD_PRELOAD=/usr/lib/preloadable_libiconv.so php","COMPOSER_HOME=/tmp/composer"],"Entrypoint":["docker-php-entrypoint"],"Cmd":["php-fpm"],"WorkingDir":"/var/www","Labels":{"com.docker.compose.project":"xdjy","com.docker.compose.service":"php8.1","com.docker.compose.version":"2.19.0"},"StopSignal":"SIGQUIT","OnBuild":null},"created":"2024-01-24T07:51:15.737737803Z","history":[{"created":"2023-12-08T01:39:30.532469787Z","created_by":"/bin/sh -c #(nop) ADD file:8182c73f869a899cf624a59c400acb8226776d15e4d3a0d240a94e65340540d0 in / "},{"created":"2023-12-08T01:39:30.654248953Z","created_by":"/bin/sh -c #(nop)  CMD [\"/bin/sh\"]","empty_layer":true},{"created":"2023-12-12T20:09:52.100234828Z","created_by":"/bin/sh -c #(nop)  ENV PHPIZE_DEPS=autoconf \t\tdpkg-dev dpkg \t\tfile \t\tg++ \t\tgcc \t\tlibc-dev \t\tmake \t\tpkgconf \t\tre2c","empty_layer":true},{"created":"2023-12-12T20:09:53.631335159Z","created_by":"/bin/sh -c apk add --no-cache \t\tca-certificates \t\tcurl \t\topenssl \t\ttar \t\txz"},{"created":"2023-12-12T20:09:54.104318613Z","created_by":"/bin/sh -c set -eux; \tadduser -u 82 -D -S -G www-data www-data"},{"created":"2023-12-12T20:09:54.18902376Z","created_by":"/bin/sh -c #(nop)  ENV PHP_INI_DIR=/usr/local/etc/php","empty_layer":true},{"created":"2023-12-12T20:09:54.603661976Z","created_by":"/bin/sh -c set -eux; \tmkdir -p \"$PHP_INI_DIR/conf.d\"; \t[ ! -d /var/www/html ]; \tmkdir -p /var/www/html; \tchown www-data:www-data /var/www/html; \tchmod 1777 /var/www/html"},{"created":"2023-12-12T20:09:54.686011005Z","created_by":"/bin/sh -c #(nop)  ENV PHP_CFLAGS=-fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64","empty_layer":true},{"created":"2023-12-12T20:09:54.767923922Z","created_by":"/bin/sh -c #(nop)  ENV PHP_CPPFLAGS=-fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64","empty_layer":true},{"created":"2023-12-12T20:09:54.849324087Z","created_by":"/bin/sh -c #(nop)  ENV PHP_LDFLAGS=-Wl,-O1 -pie","empty_layer":true},{"created":"2023-12-12T22:05:06.123669122Z","created_by":"/bin/sh -c #(nop)  ENV GPG_KEYS=528995BFEDFBA7191D46839EF9BA0ADA31CBD89E 39B641343D8C104B2B146DC3F9C39DC0B9698544 F1F692238FBC1666E5A5CCD4199F9DFEF6FFBAFD","empty_layer":true},{"created":"2023-12-28T00:03:39.423520307Z","created_by":"/bin/sh -c #(nop)  ENV PHP_VERSION=8.1.27","empty_layer":true},{"created":"2023-12-28T00:03:39.504554912Z","created_by":"/bin/sh -c #(nop)  ENV PHP_URL=https://www.php.net/distributions/php-8.1.27.tar.xz PHP_ASC_URL=https://www.php.net/distributions/php-8.1.27.tar.xz.asc","empty_layer":true},{"created":"2023-12-28T00:03:39.591409694Z","created_by":"/bin/sh -c #(nop)  ENV PHP_SHA256=479e65c3f05714d4aace1370e617d78e49e996ec7a7579a5be47535be61f0658","empty_layer":true},{"created":"2023-12-28T00:03:46.135441158Z","created_by":"/bin/sh -c set -eux; \t\tapk add --no-cache --virtual .fetch-deps gnupg; \t\tmkdir -p /usr/src; \tcd /usr/src; \t\tcurl -fsSL -o php.tar.xz \"$PHP_URL\"; \t\tif [ -n \"$PHP_SHA256\" ]; then \t\techo \"$PHP_SHA256 *php.tar.xz\" | sha256sum -c -; \tfi; \t\tif [ -n \"$PHP_ASC_URL\" ]; then \t\tcurl -fsSL -o php.tar.xz.asc \"$PHP_ASC_URL\"; \t\texport GNUPGHOME=\"$(mktemp -d)\"; \t\tfor key in $GPG_KEYS; do \t\t\tgpg --batch --keyserver keyserver.ubuntu.com --recv-keys \"$key\"; \t\tdone; \t\tgpg --batch --verify php.tar.xz.asc php.tar.xz; \t\tgpgconf --kill all; \t\trm -rf \"$GNUPGHOME\"; \tfi; \t\tapk del --no-network .fetch-deps"},{"created":"2023-12-28T00:03:46.253231473Z","created_by":"/bin/sh -c #(nop) COPY file:ce57c04b70896f77cc11eb2766417d8a1240fcffe5bba92179ec78c458844110 in /usr/local/bin/ "},{"created":"2023-12-28T00:11:43.860299263Z","created_by":"/bin/sh -c set -eux; \tapk add --no-cache --virtual .build-deps \t\t$PHPIZE_DEPS \t\targon2-dev \t\tcoreutils \t\tcurl-dev \t\tgnu-libiconv-dev \t\tlibsodium-dev \t\tlibxml2-dev \t\tlinux-headers \t\toniguruma-dev \t\topenssl-dev \t\treadline-dev \t\tsqlite-dev \t; \t\trm -vf /usr/include/iconv.h; \t\texport \t\tCFLAGS=\"$PHP_CFLAGS\" \t\tCPPFLAGS=\"$PHP_CPPFLAGS\" \t\tLDFLAGS=\"$PHP_LDFLAGS\" \t\tPHP_BUILD_PROVIDER='https://github.com/docker-library/php' \t\tPHP_UNAME='Linux - Docker' \t; \tdocker-php-source extract; \tcd /usr/src/php; \tgnuArch=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\"; \t./configure \t\t--build=\"$gnuArch\" \t\t--with-config-file-path=\"$PHP_INI_DIR\" \t\t--with-config-file-scan-dir=\"$PHP_INI_DIR/conf.d\" \t\t\t\t--enable-option-checking=fatal \t\t\t\t--with-mhash \t\t\t\t--with-pic \t\t\t\t--enable-ftp \t\t--enable-mbstring \t\t--enable-mysqlnd \t\t--with-password-argon2 \t\t--with-sodium=shared \t\t--with-pdo-sqlite=/usr \t\t--with-sqlite3=/usr \t\t\t\t--with-curl \t\t--with-iconv=/usr \t\t--with-openssl \t\t--with-readline \t\t--with-zlib \t\t\t\t--disable-phpdbg \t\t\t\t--with-pear \t\t\t\t$(test \"$gnuArch\" = 's390x-linux-musl' \u0026\u0026 echo '--without-pcre-jit') \t\t\t\t--disable-cgi \t\t\t\t--enable-fpm \t\t--with-fpm-user=www-data \t\t--with-fpm-group=www-data \t; \tmake -j \"$(nproc)\"; \tfind -type f -name '*.a' -delete; \tmake install; \tfind \t\t/usr/local \t\t-type f \t\t-perm '/0111' \t\t-exec sh -euxc ' \t\t\tstrip --strip-all \"$@\" || : \t\t' -- '{}' + \t; \tmake clean; \t\tcp -v php.ini-* \"$PHP_INI_DIR/\"; \t\tcd /; \tdocker-php-source delete; \t\trunDeps=\"$( \t\tscanelf --needed --nobanner --format '%n#p' --recursive /usr/local \t\t\t| tr ',' '\\n' \t\t\t| sort -u \t\t\t| awk 'system(\"[ -e /usr/local/lib/\" $1 \" ]\") == 0 { next } { print \"so:\" $1 }' \t)\"; \tapk add --no-cache $runDeps; \t\tapk del --no-network .build-deps; \t\tpecl update-channels; \trm -rf /tmp/pear ~/.pearrc; \t\tphp --version"},{"created":"2023-12-28T00:11:44.165333747Z","created_by":"/bin/sh -c #(nop) COPY multi:869bde9dbeae74886a05c9e2107b3e3b4877116db8c6d9adbaff2719f9fb5262 in /usr/local/bin/ "},{"created":"2023-12-28T00:11:45.238949507Z","created_by":"/bin/sh -c docker-php-ext-enable sodium"},{"created":"2023-12-28T00:11:45.32199819Z","created_by":"/bin/sh -c #(nop)  ENTRYPOINT [\"docker-php-entrypoint\"]","empty_layer":true},{"created":"2023-12-28T00:11:45.406419414Z","created_by":"/bin/sh -c #(nop) WORKDIR /var/www/html","empty_layer":true},{"created":"2023-12-28T00:11:45.885927787Z","created_by":"/bin/sh -c set -eux; \tcd /usr/local/etc; \tif [ -d php-fpm.d ]; then \t\tsed 's!=NONE/!=!g' php-fpm.conf.default | tee php-fpm.conf \u003e /dev/null; \t\tcp php-fpm.d/www.conf.default php-fpm.d/www.conf; \telse \t\tmkdir php-fpm.d; \t\tcp php-fpm.conf.default php-fpm.d/www.conf; \t\t{ \t\t\techo '[global]'; \t\t\techo 'include=etc/php-fpm.d/*.conf'; \t\t} | tee php-fpm.conf; \tfi; \t{ \t\techo '[global]'; \t\techo 'error_log = /proc/self/fd/2'; \t\techo; echo '; https://github.com/docker-library/php/pull/725#issuecomment-443540114'; echo 'log_limit = 8192'; \t\techo; \t\techo '[www]'; \t\techo '; php-fpm closes STDOUT on startup, so sending logs to /proc/self/fd/1 does not work.'; \t\techo '; https://bugs.php.net/bug.php?id=73886'; \t\techo 'access.log = /proc/self/fd/2'; \t\techo; \t\techo 'clear_env = no'; \t\techo; \t\techo '; Ensure worker stdout and stderr are sent to the main error log.'; \t\techo 'catch_workers_output = yes'; \t\techo 'decorate_workers_output = no'; \t} | tee php-fpm.d/docker.conf; \t{ \t\techo '[global]'; \t\techo 'daemonize = no'; \t\techo; \t\techo '[www]'; \t\techo 'listen = 9000'; \t} | tee php-fpm.d/zz-docker.conf; \tmkdir -p \"$PHP_INI_DIR/conf.d\"; \t{ \t\techo '; https://github.com/docker-library/php/issues/878#issuecomment-938595965'; \t\techo 'fastcgi.logging = Off'; \t} \u003e \"$PHP_INI_DIR/conf.d/docker-fpm.ini\""},{"created":"2023-12-28T00:11:45.969721314Z","created_by":"/bin/sh -c #(nop)  STOPSIGNAL SIGQUIT","empty_layer":true},{"created":"2023-12-28T00:11:46.051744551Z","created_by":"/bin/sh -c #(nop)  EXPOSE 9000","empty_layer":true},{"created":"2023-12-28T00:11:46.134686218Z","created_by":"/bin/sh -c #(nop)  CMD [\"php-fpm\"]","empty_layer":true},{"created":"2024-01-24T07:49:07.921550382Z","created_by":"ARG TZ","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2024-01-24T07:49:07.921550382Z","created_by":"ARG PHP_EXTENSIONS","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2024-01-24T07:49:07.921550382Z","created_by":"ARG CONTAINER_PACKAGE_URL","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2024-01-24T07:49:07.921550382Z","created_by":"RUN |3 TZ=Asia/Shanghai PHP_EXTENSIONS=pdo_mysql,mysqli,redis,mbstring,gd,curl,opcache,intl CONTAINER_PACKAGE_URL=mirrors.ustc.edu.cn /bin/sh -c if [ $CONTAINER_PACKAGE_URL ] ; then sed -i \"s/dl-cdn.alpinelinux.org/${CONTAINER_PACKAGE_URL}/g\" /etc/apk/repositories ; fi # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2024-01-24T07:49:07.967528632Z","created_by":"COPY ./extensions /tmp/extensions # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2024-01-24T07:49:07.981837841Z","created_by":"WORKDIR /tmp/extensions","comment":"buildkit.dockerfile.v0"},{"created":"2024-01-24T07:51:10.749448675Z","created_by":"RUN |3 TZ=Asia/Shanghai PHP_EXTENSIONS=pdo_mysql,mysqli,redis,mbstring,gd,curl,opcache,intl CONTAINER_PACKAGE_URL=mirrors.ustc.edu.cn /bin/sh -c chmod +x install.sh     \u0026\u0026 sh install.sh     \u0026\u0026 rm -rf /tmp/extensions # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2024-01-24T07:51:10.803215884Z","created_by":"ADD ./extensions/install-php-extensions /usr/local/bin/ # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2024-01-24T07:51:11.084377426Z","created_by":"RUN |3 TZ=Asia/Shanghai PHP_EXTENSIONS=pdo_mysql,mysqli,redis,mbstring,gd,curl,opcache,intl CONTAINER_PACKAGE_URL=mirrors.ustc.edu.cn /bin/sh -c chmod uga+x /usr/local/bin/install-php-extensions # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2024-01-24T07:51:12.000884509Z","created_by":"RUN |3 TZ=Asia/Shanghai PHP_EXTENSIONS=pdo_mysql,mysqli,redis,mbstring,gd,curl,opcache,intl CONTAINER_PACKAGE_URL=mirrors.ustc.edu.cn /bin/sh -c apk --no-cache add tzdata     \u0026\u0026 cp \"/usr/share/zoneinfo/$TZ\" /etc/localtime     \u0026\u0026 echo \"$TZ\" \u003e /etc/timezone # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2024-01-24T07:51:13.555186843Z","created_by":"RUN |3 TZ=Asia/Shanghai PHP_EXTENSIONS=pdo_mysql,mysqli,redis,mbstring,gd,curl,opcache,intl CONTAINER_PACKAGE_URL=mirrors.ustc.edu.cn /bin/sh -c apk add gnu-libiconv libstdc++ --no-cache --repository http://${CONTAINER_PACKAGE_URL}/alpine/edge/community/ --allow-untrusted # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2024-01-24T07:51:13.555186843Z","created_by":"ENV LD_PRELOAD=/usr/lib/preloadable_libiconv.so php","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2024-01-24T07:51:14.203559802Z","created_by":"RUN |3 TZ=Asia/Shanghai PHP_EXTENSIONS=pdo_mysql,mysqli,redis,mbstring,gd,curl,opcache,intl CONTAINER_PACKAGE_URL=mirrors.ustc.edu.cn /bin/sh -c curl -o /usr/bin/composer https://mirrors.aliyun.com/composer/composer.phar     \u0026\u0026 chmod +x /usr/bin/composer # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2024-01-24T07:51:14.203559802Z","created_by":"ENV COMPOSER_HOME=/tmp/composer","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2024-01-24T07:51:15.720010511Z","created_by":"RUN |3 TZ=Asia/Shanghai PHP_EXTENSIONS=pdo_mysql,mysqli,redis,mbstring,gd,curl,opcache,intl CONTAINER_PACKAGE_URL=mirrors.ustc.edu.cn /bin/sh -c apk --no-cache add shadow \u0026\u0026 usermod -u 1000 www-data \u0026\u0026 groupmod -g 1000 www-data # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2024-01-24T07:51:15.737737803Z","created_by":"WORKDIR /var/www","comment":"buildkit.dockerfile.v0"}],"os":"linux","rootfs":{"type":"layers","diff_ids":["sha256:3ce819cc49704a39ce4614b73a325ad6efff50e1754005a2a8f17834071027dc","sha256:1eced867a41d53d5b30bb2b812ff9a220ab8df8cdc0dff3546e3e92bc58aae09","sha256:c797e3753a9ef760b570d8cd96970dbc100bee6d417bf99bd5b6482a0a26dd01","sha256:6532aa485f0ca4809cb8112c666fa87588a0926cae63e1fdae7b4bfa32df4522","sha256:c479f6d266b350ddf5df7bba501f609a563cba91c58204be8aa213532d61aba2","sha256:292aef06d4f547720ff9f565e66ff167e246bed66b439335554fcf1b85f8656c","sha256:7da976cefcafe7856fc83555a92223fa7d800e772bc7f1103a3d45891e22e8aa","sha256:86432f8013a0e71d98ee912de59e6cdd37319b6a6e4d74615355aa179ae79e61","sha256:891236b71454061464a57066d50635a7d63ba5003c77ddd95f6eb3546f1f5d82","sha256:a4b15348366791689cc4b2eae6783ee73f5346c96bc10be97a622c922991a114","sha256:9279bcaf867c53f44ff56d9a607769911500889dc37d72b3a52949eefccde322","sha256:a4dd887c2b02b93ba26c974405c235d687a40c4dcc431ce32dc10fb8831969f9","sha256:5f70bf18a086007016e948b04aed3b82103a36bea41755b6cddfaf10ace3c6ef","sha256:e7968ffca4885e21205161fa1a3ba894210c4488bf06f93e3f8485470dbbee3c","sha256:a0bde96f1f4f6b8199652339cdbe73ae5c7101403b5444c60e31a0f40c953fbc","sha256:3202716fe2344d3d33c925e8936500c38802499992946cdd771124ed40db22ee","sha256:e9c90a389f053271539ce8c82a6de4fb67a2e1b34edb5447d13be7c97041c2c9","sha256:d28a94f5e2e21be0d9836d92b9e3a61fd823daa07d35781db8d067638b4d13ec","sha256:81e3ab3bd5bc0f5ce607aeddf7e959db35720cb1799237425bccbde413610c3e","sha256:c7aa87144d20027d4f7fc19f47af0154487e0c7f2398ce34c2f9dc8cf05799c1","sha256:5f70bf18a086007016e948b04aed3b82103a36bea41755b6cddfaf10ace3c6ef"]},"variant":"v8"}